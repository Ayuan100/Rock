!function e(t,o,r){function n(s,c){if(!o[s]){if(!t[s]){var l="function"==typeof require&&require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var u=o[s]={exports:{}};t[s][0].call(u.exports,function(e){var o=t[s][1][e];return n(o||e)},u,u.exports,e,t,o,r)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.sayHello=function(e){return"Hello from "+e}},{}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("./scanner"),n=e("./watcher"),i=e("./renderer");o.Rock=function(){function e(e){this.prefix="rock-",e&&(this.prefix=e+"-"),this.scanner=new r.Scanner(this),this.viewModelPool={}}return e.prototype.registerViewModel=function(e,t){console.log("register view model: ",e),this.viewModelPool[e]?this.viewModelPool[e].push(t):this.viewModelPool[e]=new Array(t),console.log(this.viewModelPool)},e.prototype.getViewModel=function(e){return this.viewModelPool[e][0]},e.prototype.init=function(){console.log("init---------------"),this.watcher=new n.Watcher(this,this.viewModelPool),console.log("new watcher:",this.watcher),this.watcher.observe(this.render),this.mapList=this.scanner.scan(),this.renderer=new i.Renderer(this,this.mapList),this.render()},e.prototype.render=function(){if(console.log("render",this),this.mapList)for(var e=0;e<this.mapList.length;e++)this.renderer.render(this.mapList[e])},e}()},{"./renderer":4,"./scanner":5,"./watcher":7}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(){return function(e,t){this.element=e,this.mappingList=[],t&&(this.mappingList=t)}}();o.Map=r;var n=function(){return function(e,t,o){this.viewmodel=t,this.rock_attr=e,this.vm_attr=o}}();o.Mapping=n},{}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(e,t){this.rock=e,this.mapList=t}return e.prototype.render=function(e){console.log("render");for(var t=e.mappingList,o=e.element,r=0;r<t.length;r++){var n=t[r],i=n.viewmodel;switch(n.rock_attr){case"text":o.innerHTML=i[n.vm_attr];break;case"x":o.style.left=i[n.vm_attr]+"px";break;case"y":o.style.top=i[n.vm_attr]+"px";break;case"onmousemove":o.onmousemove=i.move;default:console.log(n.rock_attr," to render")}}},e}();o.Renderer=r},{}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("./map"),n=e("./map"),i=function(){function e(e){this.prefix="rock-",this.rock=e,this.prefix=e.prefix}return e.prototype.scan=function(){console.log("scan--------");for(var e=[],t=document.querySelectorAll("*"),o=0;o<t.length;o++){for(var i=t[o],s=[],c=0;c<i.attributes.length;c++){var l=i.attributes[c];if(l.nodeName.search(this.prefix)>-1){var a=l.nodeName.substring(l.nodeName.indexOf("-")+1),u=l.value.split(/\./);if(u.length>1){var h=u[0],f=u[1],p=this.rock.getViewModel(h);p&&s.push(new n.Mapping(a,p,f))}}}s.length>0&&e.push(new r.Map(i,s))}return e},e}();o.Scanner=i},{"./map":3}],6:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(e,t,o){this.x=0,this.y=0,this.text=null,this.x=e,this.y=t,this.text=o}return e.prototype.move=function(e){this.x=e.pageX,this.y=e.pageY,console.log(this)},e}();o.ViewModel=r},{}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(e,t){this.rock=e,this.pool=t}return e.prototype.observe=function(e){console.log("observe pool:",this.pool);var t=this.rock;for(var o in this.pool){var r=this.pool[o][0];console.log("observe viewmodel:",r,e);for(var n in r)!function(o){var n=r[o];Object.defineProperty(r,o,{get:function(){return n},set:function(o){n=o,console.log("do something after set a new value"),e.call(t)}})}(n)}},e}();o.Watcher=r},{}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});e("./greet");var r=e("./lib/Rock"),n=e("./lib/view-model");console.log("hey, it is me???");var i=new r.Rock("rock"),s=new n.ViewModel(50,100,"I am ViewModel!");i.registerViewModel("vm",s),i.init(),window.viewModel=s,s.x=200,s.x=400},{"./greet":1,"./lib/Rock":2,"./lib/view-model":6}]},{},[8]);
//# sourceMappingURL=bundle.js.map
